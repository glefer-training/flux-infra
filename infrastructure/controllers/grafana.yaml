---
apiVersion: v1
kind: Namespace
metadata:
  name: monitoring
  labels:
    toolkit.fluxcd.io/tenant: sre-team
---
apiVersion: source.toolkit.fluxcd.io/v1
kind: HelmRepository
metadata:
  name: grafana
  namespace: monitoring
spec:
  interval: 24h
  url: https://grafana.github.io/helm-charts
---
apiVersion: helm.toolkit.fluxcd.io/v2
kind: HelmRelease
metadata:
  name: grafana
  namespace: monitoring
spec:
  dependsOn:
    - name: kube-prometheus-stack
      namespace: monitoring
  interval: 12h
  install:
    createNamespace: true
    strategy:
      name: RetryOnFailure
      retryInterval: 2m
  upgrade:
    strategy:
      name: RetryOnFailure
      retryInterval: 3m
  chart:
    spec:
      chart: grafana
      version: "7.0.19"
      sourceRef:
        kind: HelmRepository
        name: grafana
        namespace: monitoring
      interval: 12h
  values:
    adminPassword: aaa
    plugins:
      - grafana-worldmap-panel
    persistence:
      enabled: true
      size: 10Gi
    ingress:
      enabled: true
      ingressClassName: traefik
      annotations:
        traefik.ingress.kubernetes.io/router.entrypoints: websecure
        traefik.ingress.kubernetes.io/router.tls: "true"
        cert-manager.io/cluster-issuer: letsencrypt-production
        nginx.ingress.kubernetes.io/ssl-redirect: "true"
      hosts:
        - grafana.glefer.fr
      tls:
        - secretName: grafana-tls
          hosts:
            - grafana.glefer.fr
    datasources:
      datasources.yaml:
        apiVersion: 1
        datasources:
          - name: Prometheus
            type: prometheus
            url: http://kube-prometheus-stack-prometheus.monitoring:9090
            access: proxy
            isDefault: true
          - name: Loki
            type: loki
            url: http://loki.loki:3100
            access: proxy
            isDefault: false
            jsonData:
              derivedFields:
                - datasourceUid: prometheus
                  matcherRegex: "status=(\\d+)"
                  name: "Status Code Query"
                  url: "/explore?left=%5B%22now-1h%22,%22now%22,%22Prometheus%22,%7B%22expr%22:%22nginx_http_requests_total%7Bstatus%3D%5C%22$${__value.raw}%5C%22%7D%22%7D%5D"
    dashboardProviders:
      dashboardproviders.yaml:
        apiVersion: 1
        providers:
          - name: 'default'
            orgId: 1
            folder: ''
            type: file
            disableDeletion: false
            editable: true
            options:
              path: /var/lib/grafana/dashboards/default
    dashboards:
      default:
        kubernetes-cluster-monitoring:
          gnetId: 15757
          revision: 37
          datasource: Prometheus
        # kubernetes-cluster-summary:
        #   gnetId: 8588
        #   revision: 1
        #   datasource: Prometheus
        # node-exporter:
        #   gnetId: 1860
        #   revision: 31
        #   datasource: Prometheus
        kubernetes-pods:
          gnetId: 15760
          revision: 16
          datasource: Prometheus
        nginx-prometheus-exporter:
          gnetId: 12708
          revision: 1
          datasource: Prometheus
        website-monitoring:
          json: |
            {
              "annotations": {
                "list": [
                  {
                    "builtIn": 1,
                    "datasource": {
                      "type": "datasource",
                      "uid": "grafana"
                    },
                    "enable": true,
                    "hide": true,
                    "iconColor": "rgba(0, 211, 255, 1)",
                    "name": "Annotations & Alerts",
                    "target": {
                      "limit": 100,
                      "matchAny": false,
                      "tags": [],
                      "type": "dashboard"
                    },
                    "type": "dashboard"
                  }
                ]
              },
              "description": "NGINX Analytics",
              "editable": true,
              "fiscalYearStartMonth": 0,
              "gnetId": 12559,
              "graphTooltip": 2,
              "id": 15,
              "links": [],
              "liveNow": false,
              "panels": [
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        }
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "text",
                            "value": null
                          },
                          {
                            "color": "#9d70f9",
                            "value": 5
                          },
                          {
                            "color": "#eb4444",
                            "value": 10
                          }
                        ]
                      }
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 17,
                    "w": 17,
                    "x": 0,
                    "y": 0
                  },
                  "id": 14,
                  "interval": "1s",
                  "options": {
                    "basemap": {
                      "config": {
                        "server": "streets"
                      },
                      "name": "Layer 0",
                      "opacity": 1,
                      "tooltip": true,
                      "type": "esri-xyz"
                    },
                    "controls": {
                      "mouseWheelZoom": false,
                      "showAttribution": false,
                      "showDebug": false,
                      "showMeasure": false,
                      "showScale": false,
                      "showZoom": false
                    },
                    "layers": [
                      {
                        "config": {
                          "color": {
                            "fixed": "semi-dark-blue"
                          },
                          "fillOpacity": 0.3,
                          "shape": "circle",
                          "showLegend": false,
                          "size": {
                            "field": "Value",
                            "fixed": 5,
                            "max": 50,
                            "min": 10
                          },
                          "style": {
                            "color": {
                              "fixed": "green"
                            },
                            "opacity": 1,
                            "rotation": {
                              "fixed": 0,
                              "max": 360,
                              "min": -360,
                              "mode": "mod"
                            },
                            "size": {
                              "field": "Value (sum)",
                              "fixed": 5,
                              "max": 15,
                              "min": 4
                            },
                            "symbol": {
                              "field": "",
                              "fixed": "img/icons/marker/circle.svg",
                              "mode": "fixed"
                            },
                            "text": {
                              "field": "Metric",
                              "fixed": "",
                              "mode": "fixed"
                            }
                          }
                        },
                        "location": {
                          "lookup": "Metric",
                          "mode": "lookup"
                        },
                        "name": "Requests",
                        "tooltip": true,
                        "type": "markers"
                      }
                    ],
                    "tooltip": {
                      "mode": "details"
                    },
                    "view": {
                      "allLayers": true,
                      "id": "zero",
                      "lat": 0,
                      "lon": 0,
                      "shared": false,
                      "zoom": 2
                    }
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "sum by (geoip_country_code) (count_over_time({http_host=~\"$http_host\"} | json [$__interval])) or vector(0)",
                      "legendFormat": "{{geoip_country_code}}",
                      "queryType": "range",
                      "refId": "A"
                    }
                  ],
                  "transformations": [
                    {
                      "id": "seriesToRows",
                      "options": {}
                    },
                    {
                      "id": "filterByValue",
                      "options": {
                        "filters": [
                          {
                            "config": {
                              "id": "notEqual",
                              "options": {
                                "value": "Value"
                              }
                            },
                            "fieldName": "Metric"
                          }
                        ],
                        "match": "any",
                        "type": "include"
                      }
                    },
                    {
                      "id": "groupBy",
                      "options": {
                        "fields": {
                          "Metric": {
                            "aggregations": [],
                            "operation": "groupby"
                          },
                          "Value": {
                            "aggregations": [
                              "sum"
                            ],
                            "operation": "aggregate"
                          }
                        }
                      }
                    }
                  ],
                  "type": "geomap"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "#9d70f9",
                            "value": null
                          }
                        ]
                      },
                      "unit": "short"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 3,
                    "w": 4,
                    "x": 17,
                    "y": 0
                  },
                  "hideTimeOverride": false,
                  "id": 4,
                  "interval": "1s",
                  "options": {
                    "colorMode": "background",
                    "graphMode": "area",
                    "justifyMode": "center",
                    "orientation": "auto",
                    "reduceOptions": {
                      "calcs": [
                        "sum"
                      ],
                      "fields": "",
                      "values": false
                    },
                    "text": {},
                    "textMode": "value",
                    "wideLayout": true
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "sum by(http_host) (count_over_time({http_host=~\"$http_host\"}[$__interval]))  ",
                      "legendFormat": "{{http_host}}",
                      "queryType": "range",
                      "refId": "A"
                    }
                  ],
                  "title": "Requests  ",
                  "transformations": [],
                  "type": "stat"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "Different IP addresses",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "#9d70f9",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 3,
                    "w": 3,
                    "x": 21,
                    "y": 0
                  },
                  "id": 22,
                  "interval": "1h",
                  "options": {
                    "colorMode": "background",
                    "graphMode": "area",
                    "justifyMode": "auto",
                    "orientation": "auto",
                    "reduceOptions": {
                      "calcs": [
                        "mean"
                      ],
                      "fields": "",
                      "values": false
                    },
                    "text": {},
                    "textMode": "value",
                    "wideLayout": true
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "count(sum by (remote_addr) (count_over_time({http_host=~\"$http_host\"} | json [$__interval])))",
                      "instant": true,
                      "legendFormat": "",
                      "queryType": "range",
                      "range": false,
                      "refId": "A"
                    }
                  ],
                  "title": "Visitors per Hour",
                  "transformations": [],
                  "type": "stat"
                },
                {
                  "datasource": {
                    "type": "datasource",
                    "uid": "-- Dashboard --"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "cellOptions": {
                          "type": "auto"
                        },
                        "filterable": false,
                        "inspect": false
                      },
                      "mappings": [
                        {
                          "options": {
                            "AD": {
                              "index": 1,
                              "text": "üá¶üá© Andorra"
                            },
                            "AE": {
                              "index": 2,
                              "text": "üá¶üá™ United Arab Emirates"
                            },
                            "AF": {
                              "index": 3,
                              "text": "üá¶üá´ Afghanistan"
                            },
                            "AP": {
                              "index": 4,
                              "text": "Asia/Pacific Region"
                            },
                            "AR": {
                              "index": 5,
                              "text": "üá¶üá∑ Argentina"
                            },
                            "AT": {
                              "index": 6,
                              "text": "üá¶üáπ Austria"
                            },
                            "AU": {
                              "index": 7,
                              "text": "üá¶üá∫ Australia"
                            },
                            "BE": {
                              "index": 8,
                              "text": "üáßüá™ Belgium"
                            },
                            "BG": {
                              "index": 9,
                              "text": "üáßüá¨ Bulgaria"
                            },
                            "BR": {
                              "index": 10,
                              "text": "üáßüá∑ Brazil"
                            },
                            "BT": {
                              "index": 11,
                              "text": "üáßüáπ Bhutan"
                            },
                            "CA": {
                              "index": 12,
                              "text": "üá®üá¶ Canada"
                            },
                            "CH": {
                              "index": 13,
                              "text": "üá®üá≠ Switzerland"
                            },
                            "CM": {
                              "index": 14,
                              "text": "üá®üá≤ Cameroon"
                            },
                            "CN": {
                              "index": 15,
                              "text": "üá®üá≥ China"
                            },
                            "CO": {
                              "index": 16,
                              "text": "üá®üá¥ Colombia"
                            },
                            "CY": {
                              "index": 17,
                              "text": "üá®üáæ Cyprus"
                            },
                            "CZ": {
                              "index": 18,
                              "text": "üá®üáø Czech Republic"
                            },
                            "DE": {
                              "index": 19,
                              "text": "üá©üá™ Germany"
                            },
                            "DK": {
                              "index": 20,
                              "text": "üá©üá∞ Denmark"
                            },
                            "ES": {
                              "index": 21,
                              "text": "üá™üá∏ Spain"
                            },
                            "EU": {
                              "index": 22,
                              "text": "European Union"
                            },
                            "FI": {
                              "index": 23,
                              "text": "üá´üáÆ Finland"
                            },
                            "FR": {
                              "index": 24,
                              "text": "üá´üá∑ France"
                            },
                            "GB": {
                              "index": 25,
                              "text": "üá¨üáß United Kingdom"
                            },
                            "GE": {
                              "index": 26,
                              "text": "üá¨üá™ Georgia"
                            },
                            "GR": {
                              "index": 27,
                              "text": "üá¨üá∑ Greece"
                            },
                            "HK": {
                              "index": 29,
                              "text": "üá≠üá∞ Hong Kong"
                            },
                            "HN": {
                              "index": 30,
                              "text": "üá≠üá≥ Honduras"
                            },
                            "HR": {
                              "index": 31,
                              "text": "üá≠üá∑ Croatia"
                            },
                            "HU": {
                              "index": 28,
                              "text": "üá≠üá∫ Hungary"
                            },
                            "ID": {
                              "index": 32,
                              "text": "üáÆüá© Indonesia"
                            },
                            "IL": {
                              "index": 33,
                              "text": "üáÆüá± Israel"
                            },
                            "IN": {
                              "index": 34,
                              "text": "üáÆüá≥ India"
                            },
                            "IR": {
                              "index": 35,
                              "text": "üáÆüá∑ Iran"
                            },
                            "IS": {
                              "index": 37,
                              "text": "üáÆüá∏ Iceland"
                            },
                            "IT": {
                              "index": 36,
                              "text": "üáÆüáπ Italy"
                            },
                            "JO": {
                              "index": 38,
                              "text": "üáØüá¥ Jordan"
                            },
                            "JP": {
                              "index": 39,
                              "text": "üáØüáµ Japan"
                            },
                            "KH": {
                              "index": 40,
                              "text": "üá∞üá≠ Cambodia"
                            },
                            "KR": {
                              "index": 41,
                              "text": "üá∞üá∑ South Korea"
                            },
                            "KZ": {
                              "index": 42,
                              "text": "üá∞üáø Kazakhstan"
                            },
                            "LK": {
                              "index": 43,
                              "text": "üá±üá∞ Sri Lanka"
                            },
                            "LT": {
                              "index": 44,
                              "text": "üá±üáπ Lithuania"
                            },
                            "LU": {
                              "index": 45,
                              "text": "üá±üá∫ Luxembourg"
                            },
                            "LV": {
                              "index": 46,
                              "text": "üá±üáª Latvia"
                            },
                            "MD": {
                              "index": 47,
                              "text": "üá≤üá© Moldova"
                            },
                            "MX": {
                              "index": 48,
                              "text": "üá≤üáΩ Mexico"
                            },
                            "MY": {
                              "index": 49,
                              "text": "üá≤üáæ Malaysia"
                            },
                            "NA": {
                              "index": 50,
                              "text": "üá≥üá¶ Namibia"
                            },
                            "NL": {
                              "index": 51,
                              "text": "üá≥üá± Netherlands"
                            },
                            "NO": {
                              "index": 53,
                              "text": "üá≥üá¥ Norway"
                            },
                            "NP": {
                              "index": 52,
                              "text": "üá≥üáµ Nepal"
                            },
                            "NZ": {
                              "index": 54,
                              "text": "üá≥üáø New Zealand"
                            },
                            "OM": {
                              "index": 55,
                              "text": "üá¥üá≤ Oman"
                            },
                            "PL": {
                              "index": 56,
                              "text": "üáµüá± Poland"
                            },
                            "PT": {
                              "index": 57,
                              "text": "üáµüáπ Portugal"
                            },
                            "RO": {
                              "index": 58,
                              "text": "üá∑üá¥ Romania"
                            },
                            "RU": {
                              "index": 59,
                              "text": "üá∑üá∫ Russia"
                            },
                            "SC": {
                              "index": 60,
                              "text": "üá∏üá® Seychelles"
                            },
                            "SE": {
                              "index": 61,
                              "text": "üá∏üá™ Sweden"
                            },
                            "SG": {
                              "index": 63,
                              "text": "üá∏üá¨ Singapore"
                            },
                            "SK": {
                              "index": 62,
                              "text": "üá∏üá∞ Slovakia"
                            },
                            "TH": {
                              "index": 64,
                              "text": "üáπüá≠ Thailand"
                            },
                            "TN": {
                              "index": 65,
                              "text": "üáπüá≥ Tunisia"
                            },
                            "TR": {
                              "index": 66,
                              "text": "üáπüá∑ Turkey"
                            },
                            "TW": {
                              "index": 67,
                              "text": "üáπüáº Taiwan"
                            },
                            "UA": {
                              "index": 68,
                              "text": "üá∫üá¶ Ukraine"
                            },
                            "US": {
                              "index": 69,
                              "text": "üá∫üá∏ United States"
                            },
                            "Unknown": {
                              "index": 0,
                              "text": "üè¥‚Äç‚ò†Ô∏è Unknown"
                            },
                            "VN": {
                              "index": 70,
                              "text": "üáªüá≥ Viet Nam"
                            },
                            "ZA": {
                              "index": 71,
                              "text": "üáøüá¶ South Africa"
                            }
                          },
                          "type": "value"
                        }
                      ],
                      "noValue": "Unknown",
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          }
                        ]
                      },
                      "unit": "short"
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Value (sum)"
                        },
                        "properties": [
                          {
                            "id": "custom.cellOptions",
                            "value": {
                              "mode": "gradient",
                              "type": "gauge"
                            }
                          },
                          {
                            "id": "color",
                            "value": {
                              "mode": "continuous-BlPu"
                            }
                          },
                          {
                            "id": "custom.width",
                            "value": 200
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 14,
                    "w": 7,
                    "x": 17,
                    "y": 3
                  },
                  "id": 3,
                  "interval": "5m",
                  "options": {
                    "cellHeight": "sm",
                    "footer": {
                      "countRows": false,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "showHeader": false,
                    "sortBy": [
                      {
                        "desc": true,
                        "displayName": "Value (sum)"
                      }
                    ]
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "datasource",
                        "uid": "-- Dashboard --"
                      },
                      "panelId": 14,
                      "refId": "A"
                    }
                  ],
                  "transformations": [
                    {
                      "id": "seriesToRows",
                      "options": {}
                    },
                    {
                      "id": "groupBy",
                      "options": {
                        "fields": {
                          "Metric": {
                            "aggregations": [],
                            "operation": "groupby"
                          },
                          "Value": {
                            "aggregations": [
                              "sum"
                            ],
                            "operation": "aggregate"
                          }
                        }
                      }
                    },
                    {
                      "id": "filterByValue",
                      "options": {
                        "filters": [
                          {
                            "config": {
                              "id": "equal",
                              "options": {
                                "value": "Value"
                              }
                            },
                            "fieldName": "Metric"
                          }
                        ],
                        "match": "any",
                        "type": "exclude"
                      }
                    }
                  ],
                  "type": "table"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "cellOptions": {
                          "type": "auto"
                        },
                        "filterable": false,
                        "inspect": false
                      },
                      "mappings": [],
                      "noValue": "None",
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      }
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Value (sum)"
                        },
                        "properties": [
                          {
                            "id": "custom.cellOptions",
                            "value": {
                              "mode": "gradient",
                              "type": "gauge"
                            }
                          },
                          {
                            "id": "color",
                            "value": {
                              "mode": "continuous-BlPu"
                            }
                          },
                          {
                            "id": "custom.width",
                            "value": 300
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 10,
                    "w": 11,
                    "x": 0,
                    "y": 17
                  },
                  "id": 6,
                  "interval": "1s",
                  "options": {
                    "cellHeight": "sm",
                    "footer": {
                      "countRows": false,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "showHeader": false,
                    "sortBy": [
                      {
                        "desc": true,
                        "displayName": "Value (sum)"
                      }
                    ]
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "sum by (http_referer) (count_over_time({http_host=~\"$http_host\"} | json [$__interval]))",
                      "instant": true,
                      "legendFormat": "{{http_referer}}",
                      "queryType": "range",
                      "range": false,
                      "refId": "A"
                    }
                  ],
                  "title": "Referers",
                  "transformations": [
                    {
                      "id": "seriesToRows",
                      "options": {}
                    },
                    {
                      "id": "groupBy",
                      "options": {
                        "fields": {
                          "Metric": {
                            "aggregations": [],
                            "operation": "groupby"
                          },
                          "Value": {
                            "aggregations": [
                              "sum"
                            ],
                            "operation": "aggregate"
                          }
                        }
                      }
                    },
                    {
                      "id": "filterByValue",
                      "options": {
                        "filters": [
                          {
                            "config": {
                              "id": "equal",
                              "options": {
                                "value": "Value"
                              }
                            },
                            "fieldName": "Metric"
                          }
                        ],
                        "match": "any",
                        "type": "exclude"
                      }
                    }
                  ],
                  "type": "table"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "cellOptions": {
                          "type": "auto"
                        },
                        "filterable": false,
                        "inspect": false
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Value (sum)"
                        },
                        "properties": [
                          {
                            "id": "custom.width",
                            "value": 300
                          },
                          {
                            "id": "custom.cellOptions",
                            "value": {
                              "mode": "gradient",
                              "type": "gauge"
                            }
                          },
                          {
                            "id": "color",
                            "value": {
                              "mode": "continuous-BlPu"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 10,
                    "w": 13,
                    "x": 11,
                    "y": 17
                  },
                  "id": 24,
                  "interval": "5m",
                  "options": {
                    "cellHeight": "sm",
                    "footer": {
                      "countRows": false,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "showHeader": false,
                    "sortBy": [
                      {
                        "desc": true,
                        "displayName": "Value (sum)"
                      }
                    ]
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "sum by (request_uri) (count_over_time({http_host=~\"$http_host\"} | json | status = 200 [$__interval]))",
                      "legendFormat": "{{request_uri}}",
                      "queryType": "range",
                      "refId": "A"
                    }
                  ],
                  "title": "Successfully Requested Pages",
                  "transformations": [
                    {
                      "id": "seriesToRows",
                      "options": {}
                    },
                    {
                      "id": "groupBy",
                      "options": {
                        "fields": {
                          "Metric": {
                            "aggregations": [],
                            "operation": "groupby"
                          },
                          "Value": {
                            "aggregations": [
                              "sum"
                            ],
                            "operation": "aggregate"
                          }
                        }
                      }
                    }
                  ],
                  "type": "table"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 27
                  },
                  "id": 28,
                  "panels": [],
                  "title": "Technical",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "continuous-BlPu"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "bars",
                        "fillOpacity": 100,
                        "gradientMode": "hue",
                        "hideFrom": {
                          "graph": false,
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": true,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green"
                          },
                          {
                            "color": "#EAB839",
                            "value": 0.2
                          },
                          {
                            "color": "red",
                            "value": 0.3
                          }
                        ]
                      },
                      "unit": "s"
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "max latency"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "super-light-blue",
                              "mode": "fixed"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 10,
                    "w": 11,
                    "x": 0,
                    "y": 28
                  },
                  "id": 16,
                  "interval": "5m",
                  "options": {
                    "legend": {
                      "calcs": [
                        "mean"
                      ],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "desc"
                    }
                  },
                  "pluginVersion": "8.0.0-beta3",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "quantile_over_time(0.95,{http_host=~\"$http_host\"} | json | unwrap request_time [$__interval]) by (http_host)",
                      "legendFormat": "95th Percentile",
                      "queryType": "range",
                      "refId": "C"
                    },
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "max by (http_host) (max_over_time({http_host=~\"$http_host\"} | json | unwrap request_time  [$__interval]))",
                      "legendFormat": "Max Latency",
                      "queryType": "range",
                      "refId": "D"
                    }
                  ],
                  "title": "Processing Time",
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisBorderShow": false,
                        "axisCenteredZero": false,
                        "axisColorMode": "text",
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "bars",
                        "fillOpacity": 39,
                        "gradientMode": "hue",
                        "hideFrom": {
                          "graph": false,
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "insertNulls": false,
                        "lineInterpolation": "smooth",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": true,
                        "stacking": {
                          "group": "A",
                          "mode": "normal"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "decimals": 0,
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green"
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "short"
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "HTTP Status 500"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "dark-orange",
                              "mode": "fixed"
                            }
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "{statuscode=\"200\"} 200"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "green",
                              "mode": "fixed"
                            }
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "{statuscode=\"404\"} 404"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "semi-dark-purple",
                              "mode": "fixed"
                            }
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "{statuscode=\"500\"} 500"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "dark-red",
                              "mode": "fixed"
                            }
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "HTTP Status 404"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "light-orange",
                              "mode": "fixed"
                            }
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "HTTP Status 301"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "light-blue",
                              "mode": "fixed"
                            }
                          }
                        ]
                      },
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "HTTP Status 200"
                        },
                        "properties": [
                          {
                            "id": "color",
                            "value": {
                              "fixedColor": "semi-dark-blue",
                              "mode": "fixed"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 10,
                    "w": 13,
                    "x": 11,
                    "y": 28
                  },
                  "id": 26,
                  "interval": "5m",
                  "options": {
                    "legend": {
                      "calcs": [],
                      "displayMode": "list",
                      "placement": "bottom",
                      "showLegend": true
                    },
                    "tooltip": {
                      "mode": "multi",
                      "sort": "none"
                    }
                  },
                  "pluginVersion": "8.0.0-beta3",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "sum by (status) (count_over_time({http_host=~\"$http_host\"} | json [$__interval]))",
                      "legendFormat": "HTTP Status {{status}}",
                      "queryType": "range",
                      "refId": "A"
                    }
                  ],
                  "title": "Status",
                  "transformations": [],
                  "type": "timeseries"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "custom": {
                        "align": "auto",
                        "cellOptions": {
                          "type": "auto"
                        },
                        "filterable": false,
                        "inspect": false
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green"
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      }
                    },
                    "overrides": [
                      {
                        "matcher": {
                          "id": "byName",
                          "options": "Value (sum)"
                        },
                        "properties": [
                          {
                            "id": "custom.width",
                            "value": 300
                          },
                          {
                            "id": "custom.cellOptions",
                            "value": {
                              "mode": "gradient",
                              "type": "gauge"
                            }
                          },
                          {
                            "id": "color",
                            "value": {
                              "mode": "continuous-BlPu"
                            }
                          }
                        ]
                      }
                    ]
                  },
                  "gridPos": {
                    "h": 11,
                    "w": 11,
                    "x": 0,
                    "y": 38
                  },
                  "id": 7,
                  "interval": "5m",
                  "options": {
                    "cellHeight": "sm",
                    "footer": {
                      "countRows": false,
                      "fields": "",
                      "reducer": [
                        "sum"
                      ],
                      "show": false
                    },
                    "frameIndex": 0,
                    "showHeader": false,
                    "sortBy": [
                      {
                        "desc": true,
                        "displayName": "Value (sum)"
                      }
                    ]
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "sum by (http_user_agent) (count_over_time({http_host=~\"$http_host\"} | json [$__interval]))",
                      "instant": true,
                      "legendFormat": "{{http_user_agent}}",
                      "queryType": "range",
                      "range": false,
                      "refId": "A"
                    }
                  ],
                  "title": "User Agents",
                  "transformations": [
                    {
                      "id": "seriesToRows",
                      "options": {}
                    },
                    {
                      "id": "groupBy",
                      "options": {
                        "fields": {
                          "Metric": {
                            "aggregations": [],
                            "operation": "groupby"
                          },
                          "Value": {
                            "aggregations": [
                              "sum"
                            ],
                            "operation": "aggregate"
                          }
                        }
                      }
                    }
                  ],
                  "type": "table"
                },
                {
                  "datasource": {
                    "type": "loki",
                    "uid": "P8E80F9AEF21F6940"
                  },
                  "description": "",
                  "gridPos": {
                    "h": 11,
                    "w": 13,
                    "x": 11,
                    "y": 38
                  },
                  "id": 11,
                  "interval": "5m",
                  "maxDataPoints": 1,
                  "options": {
                    "dedupStrategy": "signature",
                    "enableLogDetails": true,
                    "prettifyLogMessage": false,
                    "showCommonLabels": false,
                    "showLabels": false,
                    "showTime": false,
                    "sortOrder": "Descending",
                    "wrapLogMessage": true
                  },
                  "pluginVersion": "9.3.6",
                  "targets": [
                    {
                      "datasource": {
                        "type": "loki",
                        "uid": "P8E80F9AEF21F6940"
                      },
                      "editorMode": "code",
                      "expr": "{http_host=~\"$http_host\"} | json | line_format \"{{.request_uri}} with HTTP status: {{.status}}\"",
                      "legendFormat": "",
                      "queryType": "range",
                      "refId": "A"
                    }
                  ],
                  "title": "Logs",
                  "type": "logs"
                },
                {
                  "collapsed": false,
                  "gridPos": {
                    "h": 1,
                    "w": 24,
                    "x": 0,
                    "y": 49
                  },
                  "id": 32,
                  "panels": [],
                  "title": "Heatmap",
                  "type": "row"
                },
                {
                  "datasource": {
                    "type": "datasource",
                    "uid": "-- Dashboard --"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "custom": {
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "scaleDistribution": {
                          "type": "linear"
                        }
                      }
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 16,
                    "w": 24,
                    "x": 0,
                    "y": 50
                  },
                  "id": 30,
                  "interval": "5m",
                  "options": {
                    "calculate": false,
                    "cellGap": 0,
                    "color": {
                      "exponent": 0.5,
                      "fill": "#9d70f9",
                      "mode": "scheme",
                      "reverse": false,
                      "scale": "exponential",
                      "scheme": "Rainbow",
                      "steps": 64
                    },
                    "exemplars": {
                      "color": "rgba(255,0,255,0.7)"
                    },
                    "filterValues": {
                      "le": 0
                    },
                    "legend": {
                      "show": true
                    },
                    "rowsFrame": {
                      "layout": "auto",
                      "value": "Requests"
                    },
                    "tooltip": {
                      "show": true,
                      "yHistogram": false
                    },
                    "yAxis": {
                      "axisPlacement": "left",
                      "reverse": true,
                      "unit": "short"
                    }
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "datasource",
                        "uid": "-- Dashboard --"
                      },
                      "panelId": 14,
                      "refId": "A"
                    }
                  ],
                  "title": "Country",
                  "transformations": [],
                  "type": "heatmap"
                },
                {
                  "datasource": {
                    "type": "datasource",
                    "uid": "-- Dashboard --"
                  },
                  "description": "",
                  "fieldConfig": {
                    "defaults": {
                      "custom": {
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "viz": false
                        },
                        "scaleDistribution": {
                          "type": "linear"
                        }
                      }
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 15,
                    "w": 24,
                    "x": 0,
                    "y": 66
                  },
                  "id": 29,
                  "interval": "5m",
                  "options": {
                    "calculate": false,
                    "cellGap": 1,
                    "color": {
                      "exponent": 0.1,
                      "fill": "#9d70f9",
                      "mode": "scheme",
                      "reverse": false,
                      "scale": "exponential",
                      "scheme": "Rainbow",
                      "steps": 128
                    },
                    "exemplars": {
                      "color": "rgba(255,0,255,0.7)"
                    },
                    "filterValues": {
                      "le": 1e-9
                    },
                    "legend": {
                      "show": true
                    },
                    "rowsFrame": {
                      "layout": "auto"
                    },
                    "tooltip": {
                      "show": true,
                      "yHistogram": false
                    },
                    "yAxis": {
                      "axisPlacement": "left",
                      "reverse": true,
                      "unit": "short"
                    }
                  },
                  "pluginVersion": "10.2.2",
                  "targets": [
                    {
                      "datasource": {
                        "type": "datasource",
                        "uid": "-- Dashboard --"
                      },
                      "panelId": 24,
                      "refId": "A"
                    }
                  ],
                  "title": "Requested Pages",
                  "transformations": [],
                  "type": "heatmap"
                }
              ],
              "refresh": "10s",
              "schemaVersion": 38,
              "tags": [],
              "templating": {
                "list": [
                  {
                    "current": {
                      "selected": false,
                      "text": "All",
                      "value": "$__all"
                    },
                    "datasource": {
                      "type": "loki",
                      "uid": "P8E80F9AEF21F6940"
                    },
                    "definition": "label_values($label_name)",
                    "hide": 0,
                    "includeAll": true,
                    "label": "http_host",
                    "multi": true,
                    "name": "http_host",
                    "options": [],
                    "query": {
                      "label": "http_host",
                      "refId": "LokiVariableQueryEditor-VariableQuery",
                      "stream": "",
                      "type": 1
                    },
                    "refresh": 1,
                    "regex": "",
                    "skipUrlSync": false,
                    "sort": 1,
                    "tagValuesQuery": "",
                    "tagsQuery": "",
                    "type": "query",
                    "useTags": false
                  }
                ]
              },
              "time": {
                "from": "now-1h",
                "to": "now"
              },
              "timepicker": {
                "refresh_intervals": [
                  "10s",
                  "30s",
                  "1m",
                  "5m",
                  "15m",
                  "30m",
                  "1h",
                  "2h",
                  "1d"
                ]
              },
              "timezone": "",
              "title": "Website Analytics",
              "uid": "Nz6kKgtGj",
              "version": 5,
              "weekStart": ""
            }
        nginx-monitoring:
          json: |
            {
              "annotations": {
                "list": [
                  {
                    "builtIn": 1,
                    "datasource": "-- Grafana --",
                    "enable": true,
                    "hide": true,
                    "iconColor": "rgba(0, 211, 255, 1)",
                    "name": "Annotations & Alerts",
                    "target": {
                      "limit": 100,
                      "matchAny": false,
                      "tags": [],
                      "type": "dashboard"
                    },
                    "type": "dashboard"
                  }
                ]
              },
              "editable": true,
              "gnetId": null,
              "graphTooltip": 0,
              "id": null,
              "links": [],
              "panels": [
                {
                  "datasource": "Prometheus",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "vis": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "reqps"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 12,
                    "x": 0,
                    "y": 0
                  },
                  "id": 1,
                  "options": {
                    "legend": {
                      "calcs": [],
                      "displayMode": "list",
                      "placement": "bottom"
                    },
                    "tooltip": {
                      "mode": "single"
                    }
                  },
                  "targets": [
                    {
                      "expr": "rate(nginx_http_requests_total{namespace=\"glefer\"}[5m])",
                      "interval": "",
                      "legendFormat": "Request Rate - {{instance}}",
                      "refId": "A"
                    }
                  ],
                  "title": "NGINX Request Rate",
                  "type": "timeseries"
                },
                {
                  "datasource": "Prometheus",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "red",
                            "value": null
                          },
                          {
                            "color": "green",
                            "value": 1
                          }
                        ]
                      }
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 6,
                    "x": 12,
                    "y": 0
                  },
                  "id": 2,
                  "options": {
                    "colorMode": "background",
                    "graphMode": "area",
                    "justifyMode": "auto",
                    "orientation": "auto",
                    "reduceOptions": {
                      "values": false,
                      "calcs": [
                        "lastNotNull"
                      ],
                      "fields": ""
                    },
                    "textMode": "auto"
                  },
                  "pluginVersion": "8.0.0",
                  "targets": [
                    {
                      "expr": "nginx_up{namespace=\"glefer\"}",
                      "interval": "",
                      "legendFormat": "NGINX Status",
                      "refId": "A"
                    }
                  ],
                  "title": "NGINX Status",
                  "type": "stat"
                },
                {
                  "datasource": "Prometheus",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "palette-classic"
                      },
                      "custom": {
                        "axisLabel": "",
                        "axisPlacement": "auto",
                        "barAlignment": 0,
                        "drawStyle": "line",
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "hideFrom": {
                          "legend": false,
                          "tooltip": false,
                          "vis": false
                        },
                        "lineInterpolation": "linear",
                        "lineWidth": 1,
                        "pointSize": 5,
                        "scaleDistribution": {
                          "type": "linear"
                        },
                        "showPoints": "never",
                        "spanNulls": false,
                        "stacking": {
                          "group": "A",
                          "mode": "none"
                        },
                        "thresholdsStyle": {
                          "mode": "off"
                        }
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          },
                          {
                            "color": "red",
                            "value": 80
                          }
                        ]
                      },
                      "unit": "short"
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 8,
                    "w": 18,
                    "x": 0,
                    "y": 8
                  },
                  "id": 3,
                  "options": {
                    "legend": {
                      "calcs": [],
                      "displayMode": "list",
                      "placement": "bottom"
                    },
                    "tooltip": {
                      "mode": "single"
                    }
                  },
                  "targets": [
                    {
                      "expr": "nginx_connections_active{namespace=\"glefer\"}",
                      "interval": "",
                      "legendFormat": "Active Connections - {{instance}}",
                      "refId": "A"
                    },
                    {
                      "expr": "nginx_connections_reading{namespace=\"glefer\"}",
                      "interval": "",
                      "legendFormat": "Reading - {{instance}}",
                      "refId": "B"
                    },
                    {
                      "expr": "nginx_connections_writing{namespace=\"glefer\"}",
                      "interval": "",
                      "legendFormat": "Writing - {{instance}}",
                      "refId": "C"
                    },
                    {
                      "expr": "nginx_connections_waiting{namespace=\"glefer\"}",
                      "interval": "",
                      "legendFormat": "Waiting - {{instance}}",
                      "refId": "D"
                    }
                  ],
                  "title": "NGINX Connections",
                  "type": "timeseries"
                },
                {
                  "datasource": "Prometheus",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 4,
                    "w": 6,
                    "x": 18,
                    "y": 8
                  },
                  "id": 4,
                  "options": {
                    "colorMode": "value",
                    "graphMode": "area",
                    "justifyMode": "auto",
                    "orientation": "auto",
                    "reduceOptions": {
                      "values": false,
                      "calcs": [
                        "lastNotNull"
                      ],
                      "fields": ""
                    },
                    "textMode": "auto"
                  },
                  "pluginVersion": "8.0.0",
                  "targets": [
                    {
                      "expr": "nginx_connections_accepted{namespace=\"glefer\"}",
                      "interval": "",
                      "legendFormat": "Accepted",
                      "refId": "A"
                    }
                  ],
                  "title": "Total Accepted Connections",
                  "type": "stat"
                },
                {
                  "datasource": "Prometheus",
                  "fieldConfig": {
                    "defaults": {
                      "color": {
                        "mode": "thresholds"
                      },
                      "mappings": [],
                      "thresholds": {
                        "mode": "absolute",
                        "steps": [
                          {
                            "color": "green",
                            "value": null
                          }
                        ]
                      }
                    },
                    "overrides": []
                  },
                  "gridPos": {
                    "h": 4,
                    "w": 6,
                    "x": 18,
                    "y": 12
                  },
                  "id": 5,
                  "options": {
                    "colorMode": "value",
                    "graphMode": "area",
                    "justifyMode": "auto",
                    "orientation": "auto",
                    "reduceOptions": {
                      "values": false,
                      "calcs": [
                        "lastNotNull"
                      ],
                      "fields": ""
                    },
                    "textMode": "auto"
                  },
                  "pluginVersion": "8.0.0",
                  "targets": [
                    {
                      "expr": "nginx_http_requests_total{namespace=\"glefer\"}",
                      "interval": "",
                      "legendFormat": "Total Requests",
                      "refId": "A"
                    }
                  ],
                  "title": "Total HTTP Requests",
                  "type": "stat"
                }
              ],
              "refresh": "30s",
              "schemaVersion": 27,
              "style": "dark",
              "tags": [
                "nginx"
              ],
              "templating": {
                "list": []
              },
              "time": {
                "from": "now-1h",
                "to": "now"
              },
              "timepicker": {},
              "timezone": "",
              "title": "NGINX Monitoring - Glefer",
              "uid": "nginx-glefer",
              "version": 1
            }
    serviceMonitor:
      enabled: true
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 100m
        memory: 128Mi
